"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},__awaiter=this&&this.__awaiter||function(e,c,i,u){return new(i=i||Promise)(function(t,r){function n(e){try{o(u.next(e))}catch(e){r(e)}}function a(e){try{o(u.throw(e))}catch(e){r(e)}}function o(e){e.done?t(e.value):function(t){return t instanceof i?t:new i(function(e){e(t)})}(e.value).then(n,a)}o((u=u.apply(e,c||[])).next())})},__generator=this&&this.__generator||function(r,n){var a,o,c,e,i={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,o&&(c=2&t[0]?o.return:t[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,t[1])).done)return c;switch(o=0,c&&(t=[2&t[0],c.value]),t[0]){case 0:case 1:c=t;break;case 4:return i.label++,{value:t[1],done:!1};case 5:i.label++,o=t[1],t=[0];continue;case 7:t=i.ops.pop(),i.trys.pop();continue;default:if(!(c=0<(c=i.trys).length&&c[c.length-1])&&(6===t[0]||2===t[0])){i=0;continue}if(3===t[0]&&(!c||t[1]>c[0]&&t[1]<c[3])){i.label=t[1];break}if(6===t[0]&&i.label<c[1]){i.label=c[1],c=t;break}if(c&&i.label<c[2]){i.label=c[2],i.ops.push(t);break}c[2]&&i.ops.pop(),i.trys.pop();continue}t=n.call(r,i)}catch(e){t=[6,e],o=0}finally{a=c=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};exports.__esModule=!0;var validation_1=require("@/lib/validation"),React=require("react"),react_hook_form_1=require("react-hook-form"),form_1=require("@/components/ui/form"),input_1=require("@/components/ui/input"),button_1=require("../ui/button"),react_pin_input_1=require("react-pin-input"),zod_1=require("@hookform/resolvers/zod"),axios_1=require("axios"),use_toast_1=require("@/components/ui/use-toast"),CreateAccountForm=function(e){var r=e.uid,n=e.setOpen,a=react_hook_form_1.useForm({resolver:zod_1.zodResolver(validation_1.createAccountSchema),defaultValues:{name:"",pin:""}}),o=a.formState.isSubmitting;return React.createElement(React.Fragment,null,React.createElement("h1",{className:"text-white text-center font-bold text-3xl"},"Create your account"),React.createElement("div",{className:"w-full h-[2px] bg-slate-500/20 mb-4 color-white"}),React.createElement(form_1.Form,__assign({},a),React.createElement("form",{onSubmit:a.handleSubmit(function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,axios_1.default.post("/api/createAccount",__assign(__assign({},t),{uid:r}))];case 1:return e.sent().data.success?(n(!1),a.reset(),[2,use_toast_1.toast({title:"Account created successfully",description:"Your account has been created successfully"})]):[3,3];case 2:return e.sent(),[2,use_toast_1.toast({title:"Error",description:"An error occurred while creating your account",variant:"destructive"})];case 3:return[2]}})})}),className:"space-y-3"},React.createElement(form_1.FormField,{control:a.control,name:"name",render:function(e){var t=e.field;return React.createElement(form_1.FormItem,null,React.createElement(form_1.FormLabel,null,"Name"),React.createElement(form_1.FormControl,null,React.createElement(input_1.Input,__assign({},t,{autoComplete:"off",className:"h-[56px]",disabled:o}))),React.createElement(form_1.FormDescription,null,"Your name is used identify your account."),React.createElement(form_1.FormMessage,{className:"text-red-600"}))}}),React.createElement(form_1.FormField,{control:a.control,name:"pin",render:function(e){var t=e.field;return React.createElement(form_1.FormItem,null,React.createElement(form_1.FormLabel,null,"PIN Code"),React.createElement(form_1.FormControl,null,React.createElement(react_pin_input_1.default,{length:4,initialValue:t.value,secret:!0,disabled:o,secretDelay:100,onChange:function(e){return t.onChange(e)},type:"numeric",inputMode:"number",style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"10px"},inputStyle:{borderColor:"RGBA(255, 255, 0.16)",height:"56px",width:"100%",fontSize:"40px"},inputFocusStyle:{borderColor:"RGBA(255, 255, 0.80"},autoSelect:!0})),React.createElement(form_1.FormDescription,null,"Your pin is used identify your account."),React.createElement(form_1.FormMessage,{className:"text-red-600"}))}}),React.createElement(button_1.Button,{className:"w-full bg-red-600 hover:bg-red-700 flex justify-center items-center h-[56px] !text-white mt-4",disabled:o},"Create account"))))};exports.default=CreateAccountForm;
//# sourceMappingURL=create-account-form.min.js.map
